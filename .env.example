APP_ENV=dev

# Postgres
DB_HOST=db
DB_PORT=5432
DB_USER=app
DB_PASSWORD=app
DB_NAME=estimates
DATABASE_URL=postgresql+asyncpg://app:app@db:5432/estimates

# Redis
REDIS_URL=redis://redis:6379/0

# ==== Celery routing ====
CELERY_DEFAULT_QUEUE=default
CELERY_PDF_QUEUE=pdf
CELERY_PUBLISH_QUEUE=publish
CELERY_OFFICE_QUEUE=office
CELERY_PREVIEW_QUEUE=preview
CELERY_RESULT_BACKEND=redis://redis:6379/0
ENABLE_CELERY_PUBLISH=1

# ==== Timeouts / TTL ====
PREVIEW_TASK_TIMEOUT=180          # превью больших PDF до 2 минут
SOURCE_BLOB_TTL=900               # исходные файлы — 15 минут
PREVIEW_BLOB_TTL=900              # превьюшки — 15 минут
FULLRES_BLOB_PREFIX=renderpng     # отдельный namespace для 300 DPI PNG
FULLRES_BLOB_TTL=1800             # high-res PNG — 30 минут (чуть дольше, на случай повторной публикации)

# ==== Worker tuning ====
WORKER_PDF_CONCURRENCY=3
WORKER_PUBLISH_CONCURRENCY=2
WORKER_OFFICE_CONCURRENCY=1
WORKER_PREVIEW_CONCURRENCY=2
WORKER_PDF_QUEUES=pdf,default
WORKER_PUBLISH_QUEUES=publish
WORKER_OFFICE_QUEUES=office
WORKER_PREVIEW_QUEUES=preview
WORKER_PDF_METRICS_PORT=9464
WORKER_PUBLISH_METRICS_PORT=9465
WORKER_OFFICE_METRICS_PORT=9466
WORKER_PREVIEW_METRICS_PORT=9467


# Observability
FLOWER_PORT=5555
FLOWER_BASIC_AUTH=

# Bot
BOT_TOKEN=

# Userbot (Pyrogram)
TG_API_ID=
TG_API_HASH=
TG_SESSION_NAME=userbot  # будет создан в volume

# RBAC
OWNER_IDS=

# Backend
BACKEND_PORT=8000
